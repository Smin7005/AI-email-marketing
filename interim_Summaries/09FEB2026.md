# 1. Move "Manage Senders" from Analytics Page to Sidebar

 Context

 The Senders page (/senders) already exists and is fully functional, but it's only accessible via a "Manage Senders" card at the bottom of the Analytics page. It should be a first-class navigation item in the sidebar instead.

 Changes

 1. Add "Senders" to the sidebar navigation

 File: src/components/dashboard/Sidebar.tsx

 - Import the Users icon (already imported but unused) — or use a more appropriate icon like Send from lucide-react
 - Add a new entry in primaryMenuItems between Campaigns and Analytics:
 { href: '/senders', label: 'Senders', icon: Send, active: pathname?.startsWith('/senders') }
 - Update the lucide-react import to include Send (and remove Users if unused)

 2. Remove the "Manage Senders" card from Analytics

 File: src/app/(dashboard)/analytics/page.tsx

 - Delete lines 301-319 (the {/* Senders Management */} section)
 - Remove the Mail icon from imports if no longer used elsewhere in the file
 - Remove the router / useRouter import if no longer used elsewhere in the file

 Verification

 - Run npm run build to confirm no build errors
 - Open the dashboard sidebar — confirm "Senders" appears between "Campaigns" and "Analytics"
 - Click "Senders" in sidebar — confirm it navigates to /senders and highlights correctly
 - Open Analytics page — confirm the "Manage Senders" card is gone

# 2. This is a research/investigation question, not an implementation task. Let me give the user a clear answer.     

  The 500 error on api/senders is most likely caused by two things you need to set up:

  1. Database: senders table doesn't exist yet in your Supabase

  The API queries a senders table (defined in src/lib/db/schema.ts:213). If you haven't run a migration to create this table in your production Supabase, the query will fail with a 500.

  You need to create the senders table in your Supabase database. You can do this via the Supabase SQL editor with something like:

  CREATE TABLE IF NOT EXISTS senders (
    id SERIAL PRIMARY KEY,
    organization_id VARCHAR NOT NULL,
    email_address VARCHAR NOT NULL,
    domain VARCHAR NOT NULL,
    verification_status VARCHAR DEFAULT 'pending',
    verification_token TEXT,
    dkim_tokens JSONB,
    dkim_status VARCHAR DEFAULT 'pending',
    is_default BOOLEAN DEFAULT false,
    last_verified_at TIMESTAMPTZ,
    verification_error TEXT,
    configuration_set_name VARCHAR,
    created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
    UNIQUE(organization_id, email_address)
  );

  CREATE INDEX senders_organization_id_idx ON senders(organization_id);
  CREATE INDEX senders_email_address_idx ON senders(email_address);
  CREATE INDEX senders_domain_idx ON senders(domain);

  2. AWS credentials missing from Vercel environment variables

  The SES service (src/lib/email/ses.ts:48-54) requires these env vars that are not listed in your .env.example:

  - AWS_ACCESS_KEY_ID
  - AWS_SECRET_ACCESS_KEY
  - AWS_SES_REGION (optional, defaults to ap-southeast-1)

  These need to be added in your Vercel project settings under Settings > Environment Variables.

  The most likely cause of the current 500 is the missing senders table — the Supabase query fails and the catch block returns a generic 500. Even after creating the table, adding a new sender will also fail without the AWS credentials.

# 3. This page shows opt-in regions for your AWS account — the default regions (like us-east-1, ap-southeast-1, ap-southeast-2) are always enabled and don't appear here.

To find which region your SES is set up in, do this instead:

  1. Go to the AWS Console > search for SES (Simple Email Service)                                                                                
  2. Look at the top-right corner of the console — it shows your current region (e.g., "Asia Pacific (Sydney)")
  3. If you see verified identities or SES configuration there, that's your region

  The region code mapping for common ones:

  | Console Name | Region Code |
  |---|---|
  | Asia Pacific (Sydney) | ap-southeast-2 |
  | Asia Pacific (Singapore) | ap-southeast-1 |
  | Asia Pacific (Melbourne) | ap-southeast-4 |
  | US East (N. Virginia) | us-east-1 |

  Since you have Melbourne enabled as an opt-in region, your SES might be in ap-southeast-4. But check the SES dashboard to confirm — switch between regions in the top-right dropdown until you find one with your SES setup.

  Once confirmed, set AWS_SES_REGION to that region code in Vercel and redeploy.

  ## Follow-up 1: 

  If you have the Vercel CLI installed, you can run these commands in your project directory:

  vercel env add AWS_ACCESS_KEY_ID
  vercel env add AWS_SECRET_ACCESS_KEY
  vercel env add AWS_SES_REGION

  Each command will prompt you for the value and which environments to apply it to.

  After adding all three, redeploy from the Vercel dashboard (Deployments > click the three dots on the latest deployment > Redeploy) to pick up  
  the new variables.

  Again — please rotate your AWS access key since it was exposed in this conversation. Create a new one in IAM and update both your .env.local and
   Vercel with the new credentials.

   ## Follow-up 2: 
   
   Yes, these DNS records are generated by AWS SES when your app called verifyDomainIdentity and verifyDomainDkim for the domain outlook.com.        
   
   Here's what each one is:
   
   1. TXT record (_amazonses.outlook.com) — This is the domain verification token. AWS SES uses it to confirm you own the domain.  

   2. 3 CNAME records (...._domainkey.outlook.com) — These are DKIM (DomainKeys Identified Mail) tokens. They allow AWS SES to digitally sign emails on behalf of your domain.

   However, there's an important issue here: It looks like you added an outlook.com email address. You cannot verify outlook.com because you don't own that domain — Microsoft does. You won't be able to add these DNS records to outlook.com's DNS settings.

   For this feature to work, you need to use an email address on a domain you own (e.g., you@yourbusiness.com), where you have access to the DNS settings (via Cloudflare, GoDaddy, Namecheap, etc.) to add these records.

   ## Follow-up 3:

   To see the same DNS records in the AWS SES Console:      

  1. Go to AWS SES Console (in ap-southeast-2 region)      
  2. In the left sidebar, click Identities (under "Configuration")
  3. You'll see outlook.com listed there (because your app registered it)
  4. Click on outlook.com
  5. You'll see tabs like Authentication — this shows the same TXT and CNAME records

  The records your app displays are fetched directly from SES via the verifyDomainIdentity and verifyDomainDkim API calls (in src/lib/email/ses.ts), then stored in your Supabase senders table. So they're the exact same records you'd see on the SES dashboard.

  You can also verify the domain status there — it will show "Pending" until the DNS records are added to the actual domain's DNS provider.

  ## Follow-up 4:

  That's a different TXT record. What you see here is a DMARC record (_dmarc.outlook.com) — this is for email authentication policy, not domain verification.
  
  The TXT record your app shows (_amazonses.outlook.com with value Rkld6Dhp4PncZ/9...) is the domain verification token from the SES v1 API. It doesn't appear in the SES v2 console because the v2 console only uses DKIM-based verification (the 3 CNAMEs). 

  To summarize what you see on SES vs your app: 

  | Record | SES Console | Your App | Purpose |
  |---|---|---|---|
  | 3 CNAME records | Yes (under DKIM) | Yes | DKIM signing + domain verification |
  | TXT _amazonses.* | Not shown in v2 console | Yes | Legacy v1 domain verification |
  | TXT _dmarc.* | Yes (DMARC section) | No | Email policy (optional) |

  The TXT record in your app is not wrong — it's just generated by the older VerifyDomainIdentityCommand API your code uses. It's redundant when DKIM CNAMEs are set up, but won't cause any issues.

  Everything is working correctly. The key takeaway: when you eventually use a domain you own, you only really need to add the 3 CNAME records to your DNS provider to get verified.